(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18375,70065,31278,e=>{"use strict";var t=e.i(43476);function r({children:e,title:r,description:a}){return(0,t.jsx)("div",{className:"min-h-screen bg-background pb-20 lg:pb-8 lg:pl-64",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl p-4 md:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-balance text-3xl font-bold tracking-tight text-foreground md:text-4xl",children:r}),a&&(0,t.jsx)("p",{className:"mt-2 text-pretty text-muted-foreground",children:a})]}),e]})})}e.s(["PageContainer",()=>r],18375);var a=e.i(47163);function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n],70065);let o=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>o],31278)},99023,e=>{"use strict";let t=(0,e.i(75254).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],99023)},25652,35408,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>r],25652);let a=(0,t.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>a],35408)},56727,e=>{"use strict";var t=e.i(43476),r=e.i(18375),a=e.i(71645),s=e.i(70065),i=e.i(47163);function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,i.cn)("w-full caption-bottom text-sm",e),...r})})}function l({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,i.cn)("[&_tr]:border-b",e),...r})}function d({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,i.cn)("[&_tr:last-child]:border-0",e),...r})}function o({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,i.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function c({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,i.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function m({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,i.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}var x=e.i(75254);let u=(0,x.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),h=(0,x.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var p=e.i(99023),f=e.i(16945);function b({data:e}){let[r,i]=(0,a.useState)(null),[x,b]=(0,a.useState)("desc"),g=e=>{r===e?b("asc"===x?"desc":"asc"):(i(e),b("desc"))},j=[...e].sort((e,t)=>{if(!r)return 0;let a=e[r],s=t[r];return"number"==typeof a&&"number"==typeof s?"asc"===x?a-s:s-a:0}),N=(t,r)=>{if(0===t)return null;let a=e[t][r],s=e[t-1][r];return a>s?"up":a<s?"down":"same"};return(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Detailed Observations"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click column headers to sort"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(n,{children:[(0,t.jsx)(l,{children:(0,t.jsxs)(o,{children:[(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("localTimestamp"),children:"Time"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("wbgt"),children:"WBGT"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("temperature"),children:"Temp"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("apparent_temp"),children:"Feels Like"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("humidity"),children:"Humidity"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("solar_radiation"),children:"Solar Rad"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("uv_index"),children:"UV"})]})}),(0,t.jsx)(d,{children:j.map((r,a)=>{(0,f.getWBGTZone)(r.wbgt);let s=e.indexOf(r);return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{className:"font-medium",children:(e=>{if(!e)return"Invalid Date";try{let t;if(e.includes("/")){let r=e.split(", ");if(2!==r.length)throw Error("Invalid timestamp format");let[a,s]=r,[i,n,l]=a.trim().split("/"),d=s.trim().split(":");if(d.length<2)throw Error("Invalid time format");let[o,c,m="0"]=d,x=parseInt(i,10),u=parseInt(n,10),h=parseInt(l,10),p=parseInt(o,10),f=parseInt(c,10),b=parseInt(m,10);if(isNaN(x)||isNaN(u)||isNaN(h)||isNaN(p)||isNaN(f)||isNaN(b))throw Error("Invalid numeric values in timestamp");t=new Date(h,u-1,x,p,f,b)}else t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date created from timestamp:",e),"Invalid Date";return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(t){return console.error("Date formatting error:",t,"Timestamp:",e),"Invalid Date"}})(r.timestamp||r.localTimestamp)}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-block h-3 w-3 rounded-full",style:{backgroundColor:0===(0,f.getWBGTZone)(r.wbgt).level?"#22c55e":1===(0,f.getWBGTZone)(r.wbgt).level?"#eab308":2===(0,f.getWBGTZone)(r.wbgt).level?"#f97316":3===(0,f.getWBGTZone)(r.wbgt).level?"#ef4444":"#991b1b"}}),(0,t.jsxs)("span",{className:"font-semibold",children:[r.wbgt.toFixed(1),"°C"]}),"up"===N(s,"wbgt")&&(0,t.jsx)(u,{className:"h-3 w-3 text-red-500"}),"down"===N(s,"wbgt")&&(0,t.jsx)(h,{className:"h-3 w-3 text-green-500"}),"same"===N(s,"wbgt")&&(0,t.jsx)(p.Minus,{className:"h-3 w-3 text-gray-400"})]})}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[r.temperature.toFixed(1),"°C","up"===N(s,"temperature")&&(0,t.jsx)(u,{className:"h-3 w-3 text-red-500"}),"down"===N(s,"temperature")&&(0,t.jsx)(h,{className:"h-3 w-3 text-blue-500"})]})}),(0,t.jsx)(m,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[r.apparent_temp.toFixed(1),"°C","up"===N(s,"apparent_temp")&&(0,t.jsx)(u,{className:"h-3 w-3 text-red-500"}),"down"===N(s,"apparent_temp")&&(0,t.jsx)(h,{className:"h-3 w-3 text-blue-500"})]})}),(0,t.jsxs)(m,{children:[r.humidity,"%"]}),(0,t.jsxs)(m,{children:[r.solar_radiation.toFixed(0)," W/m²"]}),(0,t.jsx)(m,{children:r.uv_index.toFixed(1)})]},a)})})]})})})]})}var g=e.i(25652),j=e.i(35408);let N=(0,x.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var v=e.i(29228),w=e.i(55706),y=e.i(85183),k=e.i(93230),C=e.i(31195),T=e.i(34239),I=e.i(72526);function D({data:e}){let r=e=>{if(e.length<2)return{direction:"stable",change:0};let t=e[0],r=(e[e.length-1]-t)/t*100;return 2>Math.abs(r)?{direction:"stable",change:0}:{direction:r>0?"up":"down",change:Math.abs(r)}},a=e.map(e=>e.wbgt),i=e.map(e=>e.temperature),n=e.map(e=>e.humidity),l=e.map(e=>e.wind_speed_ms),d=r(a),o=r(i),c=r(n),m=r(l),x=[...e].reverse().map(e=>({time:(e=>{if(!e)return"Invalid Date";try{let t;if(e.includes("/")){let r=e.split(", ");if(2!==r.length)throw Error("Invalid timestamp format");let[a,s]=r,[i,n,l]=a.trim().split("/"),d=s.trim().split(":");if(d.length<2)throw Error("Invalid time format");let[o,c,m="0"]=d,x=parseInt(i,10),u=parseInt(n,10),h=parseInt(l,10),p=parseInt(o,10),f=parseInt(c,10),b=parseInt(m,10);if(isNaN(x)||isNaN(u)||isNaN(h)||isNaN(p)||isNaN(f)||isNaN(b))throw Error("Invalid numeric values in timestamp");t=new Date(h,u-1,x,p,f,b)}else t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(e){return"Invalid Date"}})(e.timestamp||e.localTimestamp),wbgt:e.wbgt,temperature:e.temperature,humidity:e.humidity})),u=({direction:e})=>"up"===e?(0,t.jsx)(g.TrendingUp,{className:"h-5 w-5 text-red-500"}):"down"===e?(0,t.jsx)(j.TrendingDown,{className:"h-5 w-5 text-green-500"}):(0,t.jsx)(p.Minus,{className:"h-5 w-5 text-gray-400"}),h=[{label:"WBGT",current:a[a.length-1],unit:"°C",trend:d,color:"#ef4444"},{label:"Temperature",current:i[i.length-1],unit:"°C",trend:o,color:"#f97316"},{label:"Humidity",current:n[n.length-1],unit:"%",trend:c,color:"#3b82f6"},{label:"Wind Speed",current:l[l.length-1],unit:"m/s",trend:m,color:"#06b6d4"}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:h.map(e=>(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:e.label}),(0,t.jsx)(u,{direction:e.trend.direction})]}),(0,t.jsxs)("div",{className:"text-3xl font-bold",style:{color:e.color},children:[e.current.toFixed(1),(0,t.jsx)("span",{className:"text-lg ml-1",children:e.unit})]}),e.trend.change>0&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["up"===e.trend.direction?"+":"-",e.trend.change.toFixed(1),"% over 6 hours"]})]})},e.label))}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(N,{className:"h-5 w-5"}),"6-Hour Trends"]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"WBGT Temperature"}),(0,t.jsx)(C.ResponsiveContainer,{width:"100%",height:120,children:(0,t.jsxs)(v.LineChart,{data:x,children:[(0,t.jsx)(I.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(y.XAxis,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"11px"}}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",style:{fontSize:"11px"},domain:["dataMin - 1","dataMax + 1"]}),(0,t.jsx)(T.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(w.Line,{type:"monotone",dataKey:"wbgt",stroke:"#ef4444",strokeWidth:3,dot:{fill:"#ef4444",r:4}})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Temperature"}),(0,t.jsx)(C.ResponsiveContainer,{width:"100%",height:120,children:(0,t.jsxs)(v.LineChart,{data:x,children:[(0,t.jsx)(I.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(y.XAxis,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"11px"}}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",style:{fontSize:"11px"},domain:["dataMin - 1","dataMax + 1"]}),(0,t.jsx)(T.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(w.Line,{type:"monotone",dataKey:"temperature",stroke:"#f97316",strokeWidth:3,dot:{fill:"#f97316",r:4}})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Humidity"}),(0,t.jsx)(C.ResponsiveContainer,{width:"100%",height:120,children:(0,t.jsxs)(v.LineChart,{data:x,children:[(0,t.jsx)(I.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(y.XAxis,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"11px"}}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",style:{fontSize:"11px"},domain:["dataMin - 5","dataMax + 5"]}),(0,t.jsx)(T.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(w.Line,{type:"monotone",dataKey:"humidity",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",r:4}})]})})]})]})})]})]})}var S=e.i(83599),M=e.i(54858),A=e.i(31278);function _(){let{data:e,error:a}=(0,S.default)("recent-observations",M.fetchObservations,{refreshInterval:6e4});console.log("[v0] Recent observations data:",e);let s=!e,i=[];e&&(i=Array.isArray(e)?e:"object"==typeof e&&"observations"in e?Array.isArray(e.observations)?e.observations:[]:[e]);let n=i.sort((e,t)=>{let r=new Date(e.timestamp||e.localTimestamp||0);return new Date(t.timestamp||t.localTimestamp||0).getTime()-r.getTime()}).slice(0,6);return(0,t.jsxs)(r.PageContainer,{title:"Recent",description:"Past 6 hours of observations with data tables and trend analysis",children:[a&&(0,t.jsx)("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4 text-destructive",children:"Failed to load recent weather data. Please try again later."}),s&&!a&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(A.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),!s&&!a&&n.length>0&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(D,{data:n}),(0,t.jsx)(b,{data:n})]}),!s&&!a&&0===n.length&&(0,t.jsx)("div",{className:"rounded-lg border border-border bg-muted p-8 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No recent data available"})})]})}e.s(["default",()=>_],56727)}]);