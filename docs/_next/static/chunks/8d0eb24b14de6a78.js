(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18375,70065,31278,e=>{"use strict";var t=e.i(43476);function a({children:e,title:a,description:r}){return(0,t.jsx)("div",{className:"min-h-screen bg-background pb-20 lg:pb-8 lg:pl-64",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl p-4 md:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-balance text-3xl font-bold tracking-tight text-foreground md:text-4xl",children:a}),r&&(0,t.jsx)("p",{className:"mt-2 text-pretty text-muted-foreground",children:r})]}),e]})})}e.s(["PageContainer",()=>a],18375);var r=e.i(47163);function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>n,"CardTitle",()=>i],70065);let o=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>o],31278)},99023,e=>{"use strict";let t=(0,e.i(75254).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],99023)},25652,35408,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>a],25652);let r=(0,t.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>r],35408)},56727,e=>{"use strict";var t=e.i(43476),a=e.i(18375),r=e.i(71645),s=e.i(70065),n=e.i(47163);function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",e),...a})})}function l({className:e,...a}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",e),...a})}function d({className:e,...a}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",e),...a})}function o({className:e,...a}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...a})}function c({className:e,...a}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function x({className:e,...a}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}var m=e.i(75254);let u=(0,m.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),h=(0,m.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var p=e.i(99023),b=e.i(16945);function j({data:e}){let[a,n]=(0,r.useState)(null),[m,j]=(0,r.useState)("desc"),g=e=>{a===e?j("asc"===m?"desc":"asc"):(n(e),j("desc"))},f=[...e].sort((e,t)=>{if(!a)return 0;let r=e[a],s=t[a];return"number"==typeof r&&"number"==typeof s?"asc"===m?r-s:s-r:0}),v=(t,a)=>{if(0===t)return null;let r=e[t][a],s=e[t-1][a];return r>s?"up":r<s?"down":"same"};return(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Detailed Observations"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click column headers to sort"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(i,{children:[(0,t.jsx)(l,{children:(0,t.jsxs)(o,{children:[(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("localTimestamp"),children:"Time"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("wbgt"),children:"WBGT"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("temperature"),children:"Temp"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("apparent_temp"),children:"Feels Like"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("humidity"),children:"Humidity"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("solar_radiation"),children:"Solar Rad"}),(0,t.jsx)(c,{className:"cursor-pointer",onClick:()=>g("uv_index"),children:"UV"})]})}),(0,t.jsx)(d,{children:f.map((a,r)=>{(0,b.getWBGTZone)(a.wbgt);let s=e.indexOf(a);return(0,t.jsxs)(o,{children:[(0,t.jsx)(x,{className:"font-medium",children:(e=>{if(!e)return"Invalid Date";try{let t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date created from timestamp:",e),"Invalid Date";return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(t){return console.error("Date formatting error:",t,"Timestamp:",e),"Invalid Date"}})(a.timestamp||a.localTimestamp)}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"inline-block h-3 w-3 rounded-full",style:{backgroundColor:0===(0,b.getWBGTZone)(a.wbgt).level?"#22c55e":1===(0,b.getWBGTZone)(a.wbgt).level?"#eab308":2===(0,b.getWBGTZone)(a.wbgt).level?"#f97316":3===(0,b.getWBGTZone)(a.wbgt).level?"#ef4444":"#991b1b"}}),(0,t.jsxs)("span",{className:"font-semibold",children:[a.wbgt.toFixed(1),"°C"]}),"up"===v(s,"wbgt")&&(0,t.jsx)(u,{className:"h-3 w-3 text-red-500"}),"down"===v(s,"wbgt")&&(0,t.jsx)(h,{className:"h-3 w-3 text-green-500"}),"same"===v(s,"wbgt")&&(0,t.jsx)(p.Minus,{className:"h-3 w-3 text-gray-400"})]})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[a.temperature.toFixed(1),"°C","up"===v(s,"temperature")&&(0,t.jsx)(u,{className:"h-3 w-3 text-red-500"}),"down"===v(s,"temperature")&&(0,t.jsx)(h,{className:"h-3 w-3 text-blue-500"})]})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[a.apparent_temp.toFixed(1),"°C","up"===v(s,"apparent_temp")&&(0,t.jsx)(u,{className:"h-3 w-3 text-red-500"}),"down"===v(s,"apparent_temp")&&(0,t.jsx)(h,{className:"h-3 w-3 text-blue-500"})]})}),(0,t.jsxs)(x,{children:[a.humidity,"%"]}),(0,t.jsxs)(x,{children:[a.solar_radiation.toFixed(0)," W/m²"]}),(0,t.jsx)(x,{children:a.uv_index.toFixed(1)})]},r)})})]})})})]})}var g=e.i(25652),f=e.i(35408);let v=(0,m.default)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var y=e.i(29228),w=e.i(55706),N=e.i(85183),k=e.i(93230),C=e.i(31195),T=e.i(34239),S=e.i(72526);function D({data:e}){let a=e=>{if(e.length<2)return{direction:"stable",change:0};let t=e[0],a=(e[e.length-1]-t)/t*100;return 2>Math.abs(a)?{direction:"stable",change:0}:{direction:a>0?"up":"down",change:Math.abs(a)}},r=e.map(e=>e.wbgt),n=e.map(e=>e.temperature),i=e.map(e=>e.humidity),l=e.map(e=>e.wind_speed_ms),d=a(r),o=a(n),c=a(i),x=a(l),m=[...e].reverse().map(e=>({time:(e=>{if(!e)return"Invalid Date";try{let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";return t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(e){return"Invalid Date"}})(e.timestamp||e.localTimestamp),wbgt:e.wbgt,temperature:e.temperature,humidity:e.humidity})),u=({direction:e})=>"up"===e?(0,t.jsx)(g.TrendingUp,{className:"h-5 w-5 text-red-500"}):"down"===e?(0,t.jsx)(f.TrendingDown,{className:"h-5 w-5 text-green-500"}):(0,t.jsx)(p.Minus,{className:"h-5 w-5 text-gray-400"}),h=[{label:"WBGT",current:r[r.length-1],unit:"°C",trend:d,color:"#ef4444"},{label:"Temperature",current:n[n.length-1],unit:"°C",trend:o,color:"#f97316"},{label:"Humidity",current:i[i.length-1],unit:"%",trend:c,color:"#3b82f6"},{label:"Wind Speed",current:l[l.length-1],unit:"m/s",trend:x,color:"#06b6d4"}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:h.map(e=>(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:e.label}),(0,t.jsx)(u,{direction:e.trend.direction})]}),(0,t.jsxs)("div",{className:"text-3xl font-bold",style:{color:e.color},children:[e.current.toFixed(1),(0,t.jsx)("span",{className:"text-lg ml-1",children:e.unit})]}),e.trend.change>0&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["up"===e.trend.direction?"+":"-",e.trend.change.toFixed(1),"% over 6 hours"]})]})},e.label))}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)(s.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(v,{className:"h-5 w-5"}),"6-Hour Trends"]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"WBGT Temperature"}),(0,t.jsx)(C.ResponsiveContainer,{width:"100%",height:120,children:(0,t.jsxs)(y.LineChart,{data:m,children:[(0,t.jsx)(S.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(N.XAxis,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"11px"}}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",style:{fontSize:"11px"},domain:["dataMin - 1","dataMax + 1"]}),(0,t.jsx)(T.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(w.Line,{type:"monotone",dataKey:"wbgt",stroke:"#ef4444",strokeWidth:3,dot:{fill:"#ef4444",r:4}})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Temperature"}),(0,t.jsx)(C.ResponsiveContainer,{width:"100%",height:120,children:(0,t.jsxs)(y.LineChart,{data:m,children:[(0,t.jsx)(S.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(N.XAxis,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"11px"}}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",style:{fontSize:"11px"},domain:["dataMin - 1","dataMax + 1"]}),(0,t.jsx)(T.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(w.Line,{type:"monotone",dataKey:"temperature",stroke:"#f97316",strokeWidth:3,dot:{fill:"#f97316",r:4}})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Humidity"}),(0,t.jsx)(C.ResponsiveContainer,{width:"100%",height:120,children:(0,t.jsxs)(y.LineChart,{data:m,children:[(0,t.jsx)(S.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(N.XAxis,{dataKey:"time",stroke:"#9ca3af",style:{fontSize:"11px"}}),(0,t.jsx)(k.YAxis,{stroke:"#9ca3af",style:{fontSize:"11px"},domain:["dataMin - 5","dataMax + 5"]}),(0,t.jsx)(T.Tooltip,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),(0,t.jsx)(w.Line,{type:"monotone",dataKey:"humidity",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",r:4}})]})})]})]})})]})]})}var M=e.i(83599),A=e.i(54858),_=e.i(31278);function L(){let{data:e,error:r}=(0,M.default)("recent-observations",A.fetchObservations,{refreshInterval:6e4});console.log("[v0] Recent observations data:",e);let s=!e,n=[];e&&(n=Array.isArray(e)?e:"object"==typeof e&&"observations"in e?Array.isArray(e.observations)?e.observations:[]:[e]);let i=n.sort((e,t)=>{let a=new Date(e.timestamp||e.localTimestamp||0);return new Date(t.timestamp||t.localTimestamp||0).getTime()-a.getTime()}).slice(0,6);return(0,t.jsxs)(a.PageContainer,{title:"Recent",description:"Past 6 hours of observations with data tables and trend analysis",children:[r&&(0,t.jsx)("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4 text-destructive",children:"Failed to load recent weather data. Please try again later."}),s&&!r&&(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(_.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}),!s&&!r&&i.length>0&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(D,{data:i}),(0,t.jsx)(j,{data:i})]}),!s&&!r&&0===i.length&&(0,t.jsx)("div",{className:"rounded-lg border border-border bg-muted p-8 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No recent data available"})})]})}e.s(["default",()=>L],56727)}]);